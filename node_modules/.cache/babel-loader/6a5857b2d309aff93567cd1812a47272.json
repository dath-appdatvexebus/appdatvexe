{"ast":null,"code":"import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\vexedientu\\\\Front-End\\\\dath-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\vexedientu\\\\Front-End\\\\dath-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\xampp\\\\htdocs\\\\vexedientu\\\\Front-End\\\\dath-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\xampp\\\\htdocs\\\\vexedientu\\\\Front-End\\\\dath-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Axios from\"axios\";import{connect}from\"react-redux\";import swal from\"sweetalert\";import{Redirect}from\"react-router-dom\";var TraoDoiVe=/*#__PURE__*/function(_Component){_inherits(TraoDoiVe,_Component);var _super=_createSuper(TraoDoiVe);function TraoDoiVe(props){var _this;_classCallCheck(this,TraoDoiVe);_this=_super.call(this,props);_this.idKhachHang=localStorage.getItem(\"idKH\");_this.state={id:\"\",HoTen:\"\",TenLC:\"\",GioKH:\"\",NgayKH:\"\",Gia:\"\",Email:\"\",SDT:\"\"};return _this;}_createClass(TraoDoiVe,[{key:\"getDataAPI\",value:function getDataAPI(){var _this2=this;Axios.all([Axios.get(\"http://localhost:8000/api/login\"),Axios.get(\"http://localhost:8000/api/tuyen\"),Axios.get(\"http://localhost:8000/api/news\")]).then(function(resArr){// đẩy dữ liệu danh sách lịch chạy từ API get được vào reducer\n_this2.props.dispatch({type:\"FETCH_DSTUYEN\",payload:resArr[1].data});_this2.props.dispatch({type:\"FETCH_DSVEBAN\",payload:resArr[2].data});}).catch(function(err){console.log(err);});}},{key:\"update\",value:function update(x){var employee={idKH_trade:x};var axiosConfig={headers:{\"Content-Type\":\"application/json;charset=UTF-8\",\"Access-Control-Allow-Origin\":\"*\"}};Axios.put(\"http://localhost:8000/api/news/\"+this.state.id_new,employee,axiosConfig).then(function(res){return console.log(res.data);});}},{key:\"getTTVe\",value:function getTTVe(id,HoTen,TieuDe,GioKH,NgayKH,Gia,Email,SDT){this.setState({id_new:id,HoTen:HoTen,TieuDe:TieuDe,GioKH:GioKH,NgayKH:NgayKH,Gia:Gia,Email:Email,SDT:SDT});}},{key:\"renderVeDoi\",value:function renderVeDoi(){var _this3=this;return this.props.dsVeBanData.map(function(veBan,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\",key:index},/*#__PURE__*/React.createElement(\"img\",{src:\"https://hyundaibinhtrieu.com/wp-content/uploads/2019/09/Mclaren-720s-dau-xe.jpg\",alt:true,className:\"img-fluid rounded\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title\"},veBan.TieuDe),/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-usd\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\"Gi\\xE1 b\\xE1n:\",\" \",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},parseInt(veBan.Gia).toLocaleString(\"vi\",{style:\"currency\",currency:\"VND\"})))),/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-map-marker\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\"Ng\\xE0y \\u0111i:\",\" \",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},veBan.NgayKhoiHanh.substr(0,11))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 text-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn-rose btn\",\"data-toggle\":\"modal\",\"data-target\":\"#ticketDetails\",onClick:function onClick(){return _this3.getTTVe(veBan.id_new,veBan.HoTen,veBan.TieuDe,veBan.GioKhoiHanh,veBan.NgayKhoiHanh,veBan.Gia,veBan.Email,veBan.SDT);}},\"Li\\xEAn h\\u1EC7\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal fade bd-example-modal-lg\",id:\"ticketDetails\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"myLargeModalLabel\",\"aria-hidden\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog modal-lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header text-center\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"modal-title card-title\"},_this3.state.TieuDe,_this3.state.id_new)),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://hyundaibinhtrieu.com/wp-content/uploads/2019/09/Mclaren-720s-dau-xe.jpg\",alt:true,className:\"img-fluid rounded\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-user\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\"\\u0110\\u0103ng b\\u1EDFi:\",\" \",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},_this3.state.HoTen))),/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-clock-o\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\"L\\xFAc:\",\" \",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},_this3.state.GioKH))),/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-calendar\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\"Ng\\xE0y \\u0111i:\",\" \",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},_this3.state.NgayKH.substr(0,10)))),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-block btn-info\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-phone\"}),\" \",_this3.state.SDT)),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-block btn-success text-lowercase\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-envelope\"}),\" \",_this3.state.Email),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return _this3.update(_this3.idKhachHang);}},\"\\u0110\\u1ED5i v\\xE9\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-dismiss\":\"modal\"},\"\\u0110\\xF3ng\"))))));});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getDataAPI();}},{key:\"renderTuyen\",value:function renderTuyen(){return this.props.dstuyenData.map(function(tuyen,index){return/*#__PURE__*/React.createElement(\"li\",{className:\"itemCard\",key:index},/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},tuyen.TenTuyen));});}},{key:\"renderVeXemNhieu\",value:function renderVeXemNhieu(){return this.props.dsVeBanData.filter(function(viewVe){return viewVe.LuotXem>=1200;}).map(function(vlVe,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://hyundaibinhtrieu.com/wp-content/uploads/2019/09/Mclaren-720s-dau-xe.jpg\",alt:true,className:\"img-fluid rounded imgRounded\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title\"},vlVe.TieuDe),/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-usd\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Gi\\xE1 b\\xE1n:\",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},vlVe.Gia))),/*#__PURE__*/React.createElement(\"p\",{className:\"category\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-map-marker\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Ng\\xE0y \\u0111i:\",/*#__PURE__*/React.createElement(\"strong\",{style:{fontWeight:\"bold\"}},vlVe.NgayKhoiHanh.substr(0,10))))));});}},{key:\"render\",value:function render(){if(this.props.loginStatus===false){return/*#__PURE__*/React.createElement(Redirect,{to:\"/dang-nhap\"});}return/*#__PURE__*/React.createElement(\"section\",{id:\"trade\",style:{marginTop:100}},/*#__PURE__*/React.createElement(\"h2\",null,\"Trao \\u0111\\u1ED5i v\\xE9 xe\"),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},this.renderVeDoi()),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header card-header-danger\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title\"},\"Danh m\\u1EE5c ch\\xEDnh\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"listCard\"},this.renderTuyen())))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header card-header-danger\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title\"},\"Xem nhi\\u1EC1u nh\\u1EA5t\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},this.renderVeXemNhieu())))))));}}]);return TraoDoiVe;}(Component);var mapStateToProps=function mapStateToProps(state){return{loginStatus:state.loginReducer,dstuyenData:state.dstuyenReducer.dstuyenData,dsVeBanData:state.dsVeBanReducer.dsVeBanData};};export default connect(mapStateToProps)(TraoDoiVe);","map":{"version":3,"sources":["C:/xampp/htdocs/vexedientu/Front-End/dath-react/src/components/TraoDoiVe.js"],"names":["React","Component","Axios","connect","swal","Redirect","TraoDoiVe","props","idKhachHang","localStorage","getItem","state","id","HoTen","TenLC","GioKH","NgayKH","Gia","Email","SDT","all","get","then","resArr","dispatch","type","payload","data","catch","err","console","log","x","employee","idKH_trade","axiosConfig","headers","put","id_new","res","TieuDe","setState","dsVeBanData","map","veBan","index","fontWeight","parseInt","toLocaleString","style","currency","NgayKhoiHanh","substr","getTTVe","GioKhoiHanh","update","getDataAPI","dstuyenData","tuyen","TenTuyen","filter","viewVe","LuotXem","vlVe","loginStatus","marginTop","renderVeDoi","renderTuyen","renderVeXemNhieu","mapStateToProps","loginReducer","dstuyenReducer","dsVeBanReducer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport swal from \"sweetalert\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass TraoDoiVe extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: \"\",\r\n      HoTen: \"\",\r\n      TenLC: \"\",\r\n      GioKH: \"\",\r\n      NgayKH: \"\",\r\n      Gia: \"\",\r\n      Email: \"\",\r\n      SDT: \"\",\r\n    };\r\n  }\r\n  idKhachHang = localStorage.getItem(\"idKH\");\r\n  getDataAPI() {\r\n    Axios.all([\r\n      Axios.get(\"http://localhost:8000/api/login\"),\r\n      Axios.get(\"http://localhost:8000/api/tuyen\"),\r\n      Axios.get(\"http://localhost:8000/api/news\"),\r\n    ])\r\n      .then((resArr) => {\r\n        // đẩy dữ liệu danh sách lịch chạy từ API get được vào reducer\r\n\r\n        this.props.dispatch({\r\n          type: \"FETCH_DSTUYEN\",\r\n          payload: resArr[1].data,\r\n        });\r\n        this.props.dispatch({\r\n          type: \"FETCH_DSVEBAN\",\r\n          payload: resArr[2].data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  update(x) {\r\n    const employee = {\r\n      idKH_trade: x,\r\n    };\r\n    let axiosConfig = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    };\r\n    Axios.put(\r\n      \"http://localhost:8000/api/news/\" + this.state.id_new,\r\n      employee,\r\n      axiosConfig\r\n    ).then((res) => console.log(res.data));\r\n  }\r\n  getTTVe(id, HoTen, TieuDe, GioKH, NgayKH, Gia, Email, SDT) {\r\n    this.setState({\r\n      id_new: id,\r\n      HoTen: HoTen,\r\n      TieuDe: TieuDe,\r\n      GioKH: GioKH,\r\n      NgayKH: NgayKH,\r\n      Gia: Gia,\r\n      Email: Email,\r\n      SDT: SDT,\r\n    });\r\n  }\r\n  renderVeDoi() {\r\n    return this.props.dsVeBanData.map((veBan, index) => {\r\n      return (\r\n        <div className=\"card\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-3\" key={index}>\r\n              <img\r\n                src=\"https://hyundaibinhtrieu.com/wp-content/uploads/2019/09/Mclaren-720s-dau-xe.jpg\"\r\n                alt\r\n                className=\"img-fluid rounded\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <h4 className=\"card-title\">{veBan.TieuDe}</h4>\r\n              <p className=\"category\">\r\n                <i className=\"fa fa-usd\" />{\" \"}\r\n                <span>\r\n                  Giá bán:{\" \"}\r\n                  <strong style={{ fontWeight: \"bold\" }}>\r\n                    {parseInt(veBan.Gia).toLocaleString(\"vi\", {\r\n                      style: \"currency\",\r\n                      currency: \"VND\",\r\n                    })}\r\n                  </strong>\r\n                </span>\r\n              </p>\r\n              <p className=\"category\">\r\n                <i className=\"fa fa-map-marker\" />{\" \"}\r\n                <span>\r\n                  Ngày đi:{\" \"}\r\n                  <strong style={{ fontWeight: \"bold\" }}>\r\n                    {veBan.NgayKhoiHanh.substr(0, 11)}\r\n                  </strong>\r\n                </span>\r\n              </p>\r\n            </div>\r\n            <div className=\"col-md-3 text-center\">\r\n              <button\r\n                className=\"btn-rose btn\"\r\n                data-toggle=\"modal\"\r\n                data-target=\"#ticketDetails\"\r\n                onClick={() =>\r\n                  this.getTTVe(\r\n                    veBan.id_new,\r\n                    veBan.HoTen,\r\n                    veBan.TieuDe,\r\n                    veBan.GioKhoiHanh,\r\n                    veBan.NgayKhoiHanh,\r\n                    veBan.Gia,\r\n                    veBan.Email,\r\n                    veBan.SDT\r\n                  )\r\n                }\r\n              >\r\n                Liên hệ\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"modal fade bd-example-modal-lg\"\r\n            id=\"ticketDetails\"\r\n            tabIndex={-1}\r\n            role=\"dialog\"\r\n            aria-labelledby=\"myLargeModalLabel\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <div className=\"modal-dialog modal-lg\">\r\n              <div className=\"modal-content\">\r\n                <div className=\"modal-header text-center\">\r\n                  <h3 className=\"modal-title card-title\">\r\n                    {this.state.TieuDe}\r\n                    {this.state.id_new}\r\n                  </h3>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                  <div className=\"container\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-7\">\r\n                        <img\r\n                          src=\"https://hyundaibinhtrieu.com/wp-content/uploads/2019/09/Mclaren-720s-dau-xe.jpg\"\r\n                          alt\r\n                          className=\"img-fluid rounded\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-5\">\r\n                        <div className=\"card\">\r\n                          <p className=\"category\">\r\n                            <i className=\"fa fa-user\" />{\" \"}\r\n                            <span>\r\n                              Đăng bởi:{\" \"}\r\n                              <strong style={{ fontWeight: \"bold\" }}>\r\n                                {this.state.HoTen}\r\n                              </strong>\r\n                            </span>\r\n                          </p>\r\n                          <p className=\"category\">\r\n                            <i className=\"fa fa-clock-o\" />{\" \"}\r\n                            <span>\r\n                              Lúc:{\" \"}\r\n                              <strong style={{ fontWeight: \"bold\" }}>\r\n                                {this.state.GioKH}\r\n                              </strong>\r\n                            </span>\r\n                          </p>\r\n                          <p className=\"category\">\r\n                            <i className=\"fa fa-calendar\" />{\" \"}\r\n                            <span>\r\n                              Ngày đi:{\" \"}\r\n                              <strong style={{ fontWeight: \"bold\" }}>\r\n                                {this.state.NgayKH.substr(0, 10)}\r\n                              </strong>\r\n                            </span>\r\n                          </p>\r\n                          <div className=\"btn btn-block btn-info\">\r\n                            <span>\r\n                              <i className=\"fa fa-phone\" /> {this.state.SDT}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"btn btn-block btn-success text-lowercase\">\r\n                            <i className=\"fa fa-envelope\" /> {this.state.Email}\r\n                          </div>\r\n                          <button\r\n                            className=\"btn btn-success\"\r\n                            onClick={() => this.update(this.idKhachHang)}\r\n                          >\r\n                            Đổi vé\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    {/* end row */}\r\n                  </div>\r\n                  {/* end container */}\r\n                </div>\r\n                {/* end modal content */}\r\n                <div className=\"modal-footer\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-secondary\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    Đóng\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    this.getDataAPI();\r\n  }\r\n  renderTuyen() {\r\n    return this.props.dstuyenData.map((tuyen, index) => {\r\n      return (\r\n        <li className=\"itemCard\" key={index}>\r\n          <a href=\"#\">{tuyen.TenTuyen}</a>\r\n        </li>\r\n      );\r\n    });\r\n  }\r\n  renderVeXemNhieu() {\r\n    return this.props.dsVeBanData\r\n      .filter((viewVe) => {\r\n        return viewVe.LuotXem >= 1200;\r\n      })\r\n      .map((vlVe, index) => {\r\n        return (\r\n          <div className=\"row\" key={index}>\r\n            <div className=\"col-md-4\">\r\n              <img\r\n                src=\"https://hyundaibinhtrieu.com/wp-content/uploads/2019/09/Mclaren-720s-dau-xe.jpg\"\r\n                alt\r\n                className=\"img-fluid rounded imgRounded\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-8\">\r\n              <h4 className=\"card-title\">{vlVe.TieuDe}</h4>\r\n              <p className=\"category\">\r\n                <i className=\"fa fa-usd\" />\r\n                <span>\r\n                  Giá bán:\r\n                  <strong style={{ fontWeight: \"bold\" }}>{vlVe.Gia}</strong>\r\n                </span>\r\n              </p>\r\n              <p className=\"category\">\r\n                <i className=\"fa fa-map-marker\" />\r\n                <span>\r\n                  Ngày đi:\r\n                  <strong style={{ fontWeight: \"bold\" }}>\r\n                    {vlVe.NgayKhoiHanh.substr(0, 10)}\r\n                  </strong>\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        );\r\n      });\r\n  }\r\n  render() {\r\n    if (this.props.loginStatus === false) {\r\n      return <Redirect to=\"/dang-nhap\" />;\r\n    }\r\n    return (\r\n      <section id=\"trade\" style={{ marginTop: 100 }}>\r\n        <h2>Trao đổi vé xe</h2>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8\">{this.renderVeDoi()}</div>\r\n            {/* end col 8 */}\r\n            <div className=\"col-md-4\">\r\n              <div className=\"row\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header card-header-danger\">\r\n                    <h4 className=\"card-title\">Danh mục chính</h4>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <ul className=\"listCard\">{this.renderTuyen()}</ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"card\">\r\n                  <div className=\"card-header card-header-danger\">\r\n                    <h4 className=\"card-title\">Xem nhiều nhất</h4>\r\n                  </div>\r\n                  <div className=\"card-body\">{this.renderVeXemNhieu()}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* end col 4 */}\r\n          </div>\r\n          {/* end row */}\r\n        </div>\r\n        {/* end container */}\r\n      </section>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    loginStatus: state.loginReducer,\r\n    dstuyenData: state.dstuyenReducer.dstuyenData,\r\n    dsVeBanData: state.dsVeBanReducer.dsVeBanData,\r\n  };\r\n};\r\nexport default connect(mapStateToProps)(TraoDoiVe);\r\n"]},"metadata":{},"sourceType":"module"}